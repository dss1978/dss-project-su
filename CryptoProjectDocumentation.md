# Project Documentation

## Overview

Проектът има за цел да покаже актуална крипто/финансова информация за потребителите, както и да създаде крипто потребителски портфейл. Като ключов момент е анализа на печалбата/загубата в реално време за всяка сделка.

## Table of Contents
- App.jsx
- components/
    - auth
        - <AuthGuard />
        - <SignIn />
        - <SignUp />
        - <UserDetails />
    - footer/
        - <Footer />
    - getAllCrypto/
        - <GetAllCrypto />
    - header/
        - <Header />
    - home/
        - <Home />
    - Wallet/
        - <MyWallet />
        - <MyWalletItem />
        - <WalletCryptoForm />
- context/
    - AuthContext
- lib/
    - get-all-data
- index.css

===================================================================================================================================

-------------------------------------------------------------------------------------------------------------------------
# App.jsx
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `App.jsx` е основен и дава общата структура на приложението. Той управлява Routes и изчертава компонентите

**Библиотеки:**
- React
- react-router-dom

**Компоненти:**
- **Header:** Изчертава Header.
- **Routes:** Определя маршрутната структура на приложението.
  - **Home:** Изчертава съдържание за маршрута "/Home".
  - **SignIn:** Изчертава формата за влизане.
  - **SignUp:** Изчертава формата за регистрация.
  - **GetAllCrypto:** Показва информация за криптовалути.
  - **AuthGuard:** Обгражда маршрути, изискващи auth.
  - **MyWallet:** Показва портфейла на потребителя.
  - **MyWalletItem:** Изчертава отделни елементи на портфейла.
- **Footer:** Изчертава Footer.

-------------------------------------------------------------------------------------------------------------------------
# components/auth/<AuthGuard />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `AuthGuard.jsx` представлява компонент, който осигурява защита на определени Routes, изискващи auth на потребителя. 

**Използвани библиотеки:**
- React
- react-router-dom
- `AuthContext` от "../../context/AuthContext"

**Основна функционалност:**
- **useAuth:** Използва `useAuth` hook от `AuthContext` за получаване на информация за текущия потребител.
- **Проверка за Потребител:** Ако няма активен потребител, пренасочва потребителя към "/SignIn".
- **Return Outlet:** В противен случай рендерира компонентите (myWllet), на които е предоставен достъп чрез `Outlet`.

-------------------------------------------------------------------------------------------------------------------------
# components/auth/<SignIn />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `SignIn.jsx` съдържа компонента за влизане в системата (SignIn). Този компонент изобразява форма за въвеждане на електронна поща и парола, като осигурява валидация и вход в приложението.

**Използвани библиотеки:**
- React
- `useState` React hook
- `useNavigate` hook от `react-router-dom` за навигация
- `signInWithEmailAndPassword` функция от Firebase за auth
- `auth` обект от "../../firebase.js" за работа с Firebase auth

**Основна функционалност:**
- Управление на входни данни (електронна поща и парола) с `useState`.
- Показване на възможни грешки при вход.
- Валидация на формата преди изпращане.
- Извикване на `signInWithEmailAndPassword` за влизане със зададените данни.
- Пренасочване към "/Home" след успешен вход.

-------------------------------------------------------------------------------------------------------------------------
# components/auth/<SignUp />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `SignUp.jsx` съдържа компонента за регистрация (SignUp). Този компонент изобразява форма за въвеждане на електронна поща и парола, като осигурява валидация и регистрация на нов потребител в приложението.

**Използвани библиотеки:**
- React
- `useState` React hook
- `useNavigate` hook от `react-router-dom` за навигация
- `createUserWithEmailAndPassword` функция от Firebase за създаване на нов потребител
- `auth` обект от "../../firebase.js" за работа с Firebase auth

**Основна функционалност:**
- Управление на входни данни (електронна поща и парола) с `useState`.
- Показване на възможни грешки при регистрация.
- Валидация на формата преди изпращане.
- Извикване на `createUserWithEmailAndPassword` за регистрация със зададените данни.
- Пренасочване към "/Home" след успешна регистрация.

-------------------------------------------------------------------------------------------------------------------------
# components/auth/<UserDetails />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `UserDetails.jsx` съдържа компонента `UserDetails`, който отговаря за показване на информация за текущия потребител и предоставя възможност за logout.

**Използвани библиотеки:**
- React
- `useEffect` React hook
- `useAuth` hook от "../../context/AuthContext" за получаване на информация за текущия потребител
- CSS модул (styles от "./UserDetails.module.css")

**Основна функционалност:**
- Използва `useAuth` hook за получаване на информация за текущия потребител и функция за излизане от системата (logout).
- Показва имейла на потребителя и бутон за излизане, ако има оторизиран потребител.
- Показва съобщение "Not logged in", ако няма оторизиран потребител.
- Извършва console.log() при промяна в потребителската информация.

-------------------------------------------------------------------------------------------------------------------------
# components/footer/<Footer />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `Footer.jsx` съдържа компонента `Footer`, отговарящ за показването на Footer в страницата.

**Използвани библиотеки:**
- React

**Основна функционалност:**
- Показва футър със статична информация.

-------------------------------------------------------------------------------------------------------------------------
# components/gerAllCrypto/<GetAllCrypto />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `GetAllCrypto.jsx` съдържа компонента `GetAllCrypto`, който извлича и показва crypto данни от външен URL.

**Използвани библиотеки:**
- React
- useState, useEffect - React hooks
- getAllData - функция за извличане на данни (lib/get-all-data)

**Основна функционалност:**
- Зарежда и показва в таблица данни за крипто валути.
- Позволява на потребителя да избира интервал за обновяване на данните.

-------------------------------------------------------------------------------------------------------------------------
# components/header/<Header />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `Header.jsx` съдържа компонента `Header`, който съдържа навигационните менюта на приложението.

**Използвани библиотеки:**
- React
- Link, useLocation - React Router библиотеката за навигация
- useAuth - React hook за управление на auth
- UserDatails - компонент за показване на информацията за потребителя

**Основна функционалност:**
- Показва навигационно меню с линкове.
- Показва различни линкове в зависимост от това дали потребителят e оторизиран в системата.
- В мобилна версия показва/скрива менюто след натискане на иконката за мобилно меню.

-------------------------------------------------------------------------------------------------------------------------
# components/home/<Home />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `Home.jsx` съдържа компонента `Home`, който е начална страница и показва списък с новини извлечени от външен URL.

**Използвани библиотеки:**
- React
- DOMPurify - за безопасна визуализация на HTML съдържание

**Основна функционалност:**
- Извлича новини от външен източник със задържане на опитите при получаване на HTTP 429 (too many requests).
- Показва списък с новини в tailwind cards, взети от източника.
- Използва DOMPurify за сигурно визуализиране на HTML съдържанието на новините. Предпазва от XSS атаки.

-------------------------------------------------------------------------------------------------------------------------
# components/Wallet/<MyWallet />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `MyWallet.jsx` съдържа компонента `MyWallet`, който представлява потребителски портфейл, с възможност за въвеждане/редактиране/изтриване и преглед на отделни сделки.

**Използвани библиотеки:**
- React
- react-router-dom - за навигация в приложението
- firebase - за взаимодействие с базата данни в реално време
- chart.js, react-chartjs-2 - библиотеки за визуализация на графики
- WalletCryptoForm - компонент за форма за въвеждане/редакция на сделки в портфейла
- chartjs-adapter-date-fns - библиотека за работа с дати

**Основна функционалност:**
- Извлича данни от базата данни, представляващи сделките в портфейла на потребителя.
- Показва списък със сделки, включващи информация за времето на сделката, вида на криптовалутата, количество, цена и общата стойност.
- Показва времева графика на сделките със съответните стойности.
- Опция за добавяне на нова сделка чрез модален прозорец.
- Опция за редактиране и изтриване на сделка чрез модален прозорец.
- Сумира общата стойност на портфейла и я показва в долната част на таблицата със сделки.

-------------------------------------------------------------------------------------------------------------------------
# components/Wallet/<MyWalletItem />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `MyWalletItem.jsx` съдържа компонента `MyWalletItem`, който представлява страницата с детайли за определена сделка от портфейла на потребителя.

**Използвани библиотеки:**
- React
- react-router-dom - за навигация в приложението
- firebase - за взаимодействие с базата данни в реално време
- getAllData - функция за извличане на данни от външен източник

**Основна функционалност:**
- Извлича данни от базата данни, представляващи конкретна сделка от портфейла на потребителя.
- Извлича от външен URL данни за актуалната цена на криптовалутата.
- Визуализира информация за времето на сделката, криптовалутата, количество, цена, общата инвестиция и актуалната цена.
- Изчислява печалбата или загубата в зависимост от актуалната цена на криптовалутата.
- Поддържа възможност за връщане към предходната страница.

**Допълнителна информация:**
- Използва се модулът getAllData за извличане на актуална цена на криптовалутата от CoinCap.
- Визуализация на печалбата в зелено и загубата в червено.

-------------------------------------------------------------------------------------------------------------------------
# components/Wallet/<WalletCryptoForm />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `WalletCryptoForm.jsx` съдържа компонента `WalletCryptoForm`, който представлява форма за добавяне и редактиране на сделки в портфейла на потребителя.

**Използвани библиотеки:**
- React
- useState, useEffect - React hooks
- firebase - за взаимодействие с базата данни в реално време
- useAuth - контекст за управление на потребителският вход
- collection, addDoc, getDocs, doc, serverTimestamp, setDoc - функции от `firebase/firestore` за манипулиране на данните в базата данни

**Основна функционалност:**
- Позволява на потребителя да избере криптовалута от падащ списък, въведе количество и цена за сделката.
- Предоставя възможност за добавяне на нова сделка в портфейла или редактиране на съществуваща.
- Предоставя възможност за добавяне на нова криптовалута. /Тази функционалност е скрита в интерфейса !/
- Проверява валидността на въведените данни преди извършване на действията.
- Визуализира се в модал в родителския компонент `MyWallet`.

**Допълнителна информация:**
- За добавяне на криптовалута се използва `collection` и `addDoc` за взаимодействие с колекцията `crypto` в базата данни.
- За извличане на възможни криптовалути се използва `collection`, `getDocs` и `ma`p за преобразуване на данните в опции за <select>.
- За добавяне на нова сделка или редактиране на съществуваща се използва `collection` и `addDoc` или `setDo`c за манипулиране на данните в колекцията `wallet` в базата данни.
- Формата се зарежда с предварителни данни, ако се редактира съществуваща сделка.
- Данните от формата се валидират в реално време, преди да бъдат предоставени опции за добавяне/редактиране на сделка.
- Предоставя възможност за изчистване на формата след успешно добавяне или редактиране.

-------------------------------------------------------------------------------------------------------------------------
# context/<AuthContext />
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `AuthContext.jsx` съдържа компонента `AuthProvider`, който предоставя контекст и логика за управление на потребителската аутентикация.

**Използвани библиотеки:**
React
useState, useEffect - React hooks
firebase - за взаимодействие с потребителската аутентикация

**Основна функционалност:**
- Създава контекст за управление на потребителската аутентикация.
- Извиква функцията `onAuthStateChanged` от `firebase/auth` за проследяване на промените в състоянието на аутентикацията.
- Предоставя функции за вход (login) и изход (logout) на потребителя.
- Зарежда в контекста текущия потребител и предоставя възможност за следене на промените в аутентикацията.
- Hook-ът `useAuth` се използва за получаване на стойности и функции от контекста.

**Допълнителна информация:**
- Функцията `login` използва `signInWithEmailAndPassword` от `firebase/auth` за аутентикация чрез имейл и парола.
- Функцията `logout` използва `signOut` от `firebase/auth` за излизане от потребителският акаунт.
- Компонентът се ползва от други компоненти, които използват контекста за управление на аутентикацията, като например `useAuth`.

-------------------------------------------------------------------------------------------------------------------------
# lib/get-all-data
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Файлът `getAllData.js` съдържа функцията `getAllData`, която се използва за извършване на HTTP заявки и обработка на отговорите.

**Използвани библиотеки:**
- fetch - вградена библиотека за извършване на HTTP заявки

**Основна функционалност:**
- Предоставя функционалност за извършване на HTTP заявки към зададен URL.
- Използва асинхронен подход (async и await) за управление на асинхронни операции.
- Поддържа задаване на метод (по подразбиране `GET`), данни за заявката и заглавия към нея.
- Използва `fetch` за изпращане на заявката и обработка на отговора.
- Проверява дали отговорът е успешен, в противен случай хвърля грешка.
- Връща `JSON` обект съдържащ отговора на заявката.

**Допълнителна информация:**
- Функцията е предназначена за обобщено извършване на HTTP заявки във всякакъв контекст.
- Използва се за комуникация с външни API или извличане на данни от уеб сървъри.
- Поддържа задаването на различни параметри за заявката, като `METHOD`, `BODY` и `TITLE`.

-------------------------------------------------------------------------------------------------------------------------
# index.css
-------------------------------------------------------------------------------------------------------------------------
**Описание:**
Основен CSS файл, в който се дефинира `Tailwind CSS` библиотеката.
\\    @import 'tailwindcss/base';
\\    @import 'tailwindcss/components';
\\    @import 'tailwindcss/utilities';
    